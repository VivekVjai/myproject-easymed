{% extends 'base.html'%} {% load static %} {%block main_block%}

<div class="container mx-auto p-6">
  <!-- Shop Name Header -->
  <header class="mb-8 text-center">
    <h1 class="text-4xl font-extrabold text-indigo-700">{{ dealer.owner }}</h1>
    <p class="text-gray-600 mt-1">Medicines available</p>
  </header>

  {% if medicine_list %}
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
    {% for med in medicine_list %}

    <div
      class="bg-white rounded-2xl shadow-md p-4 flex flex-col hover:shadow-xl transition"
    >
      <!-- Medicine Image -->
      {% if med.image %}
      <img
        src="{{ med.image.url }}"
        alt="{{ med.name }}"
        class="w-full h-48 object-cover rounded-lg mb-4"
      />
      {% else %}
      <img
        src="{% static 'medimages/defaultimage.jpg' %}"
        alt="No Image"
        class="w-full h-48 object-cover rounded-lg mb-4"
      />
      {% endif %}

      <!-- Medicine Info -->
      <div class="flex-1">
        <h2 class="text-xl font-semibold text-indigo-600">{{ med.name }}</h2>
        <p class="text-sm text-gray-500 mt-1">
          Category: {{ med.category.name }}
        </p>
        <p class="mt-1 text-gray-700 text-sm">
          {{ med.description|truncatewords:20 }}
        </p>
      </div>

      <!-- Price and Discounts -->
      <div class="mt-2">
        <span class="text-lg font-bold text-gray-900">â‚¹{{ med.price }}</span>
        <span
          class="ml-2 px-2 py-0.5 rounded bg-green-100 text-green-800 text-xs font-semibold"
          >{{ med.discount }}% OFF</span
        >
      </div>

      <!-- Buttons -->
      <div class="mt-4 flex space-x-2">
        <form method="POST" action="{% url 'cartadd' med.id %}" class="w-full">
          {% csrf_token %}

          <div class="flex items-center justify-between space-x-2 mb-2">
            <button
              type="button"
              onclick="adjustQty(this, -1)"
              class="w-8 h-8 rounded-full bg-gray-200 text-gray-700 font-bold hover:bg-gray-300"
            >
              -
            </button>

            <input
              type="number"
              name="quantity"
              value="1"
              min="1"
              class="w-12 text-center border rounded-md"
            />

            <button
              type="button"
              onclick="adjustQty(this, 1)"
              class="w-8 h-8 rounded-full bg-gray-200 text-gray-700 font-bold hover:bg-gray-300"
            >
              +
            </button>
          </div>

          <button
            type="submit"
            class="w-full py-1.5 px-3 text-sm bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition"
          >
            Add to Cart
          </button>
        </form>

        <a
          href="{% url 'pricecompare' med.id %}"
          class="w-1/2 text-sm text-center py-1.5 px-3 border border-indigo-600 text-indigo-600 rounded-lg hover:bg-indigo-50 transition"
        >
          Compare
        </a>
      </div>
    </div>

    {% endfor %}
  </div>
  {% else %}
  <p class="text-center text-gray-500">No medicines available in this shop.</p>
  {% endif %}
</div>

{%endblock%}
